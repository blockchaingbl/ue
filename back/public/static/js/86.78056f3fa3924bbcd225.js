webpackJsonp([86],{SKAh:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("a3Yh"),r=e.n(s),i=e("CHv/"),n=e("eT+W"),o=e("CltZ"),c=e("hpCS"),u=e("DEX7"),d=e("ocpe"),l=e("jH8X"),p=e("EOtl"),_=(l.a,i.a,n.a,o.a,c.a,u.a,d.a,p.a,{directives:{TransferDom:l.a},components:{XInput:i.a,XButton:n.a,Box:o.a,PopupRadio:c.a,XSwitch:u.a,Loading:d.a,Radio:p.a},data:function(){var t;return t={useravatar:"",username:"",loading:!0,usermobile:"",security:"",trans_fee:null,ex_rate:[],chose_rate:"",amount:"",coin_price:"",real_expend:"",rate_lists:[],chose_info:{}},r()(t,"security",""),r()(t,"vc_normal",""),t},mounted:function(){this.get_info()},methods:{get_info:function(){var t=this,a=this.$route.params.id;this.$http.post("/api/app.user/transfer/userexrate",{id:a}).then(function(a){a.data.has_sec||(t.$vux.toast.text("您还未设置资产密码,请前去设置"),setTimeout(function(){t.$router.push({name:"editSecurity"})},2e3)),t.vc_normal=a.data.vc_normal,t.trans_fee=a.data.trans_fee,t.username=a.data.user.username,t.user_id=a.data.user.id,t.useravatar=a.data.user.avatar,t.usermobile=a.data.user.mobile,t.coin_price=a.data.coin_price,t.rate_lists=a.data.lists,a.data.lists.map(function(a){var e=a.name+"("+a.symbol+")";t.ex_rate.push({key:a.id,value:e})}),t.chose_rate=a.data.lists[0].id,t.hide_change(),t.loading=!1}).catch(function(a){t.$router.push({path:"/error/404"}),t.loading=!1})},send_to:function(){var t=this;this.loading=!0;var a={amount:this.amount,ex_id:this.chose_rate,to_id:this.user_id,security:this.security};this.$http.post("/api/app.user/transfer/send",a).then(function(a){if(0==a.errcode){var e=a.data.transfer;e.to_user=t.username,t.$router.push({name:"transferSuccess",params:e})}t.loading=!1}).catch(function(a){t.$vux.toast.text(a.message),t.loading=!1})},hide_change:function(){var t=this.chose_rate;this.chose_info=this.rate_lists.find(function(a){return a.id==t})}},computed:{gbl_price:function(){if(parseFloat(this.amount)>0){var t=parseFloat(this.amount),a=this.chose_info,e=parseFloat(this.coin_price),s=t*a.rate/e*(parseFloat(this.trans_fee)+1);return"约"+s.toFixed(5)+"  "+this.$store.state.init.coin_uint}}}}),v={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"page-grant"},[t.loading?t._e():s("div",[s("div",{staticClass:"center-banner"},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"user-portrait"},[""==t.useravatar?s("img",{attrs:{src:e("0gU3"),alt:""}}):s("img",{attrs:{src:t.useravatar}})]),t._v(" "),s("div",{staticClass:"user-name"},[s("div",{staticClass:"name"},[t._v(t._s(t.username))])]),t._v(" "),s("div",{staticClass:"user-modile"})])]),t._v(" "),s("div",{staticClass:"candy-basic-opera"},[s("group",{staticClass:"assets-type vux-1px-b"},[s("popup-radio",{attrs:{title:"",options:t.ex_rate},on:{"on-hide":t.hide_change},model:{value:t.chose_rate,callback:function(a){t.chose_rate=a},expression:"chose_rate"}},[s("p",{staticClass:"vux-1px-b grant-coin-slot",attrs:{slot:"popup-header"},slot:"popup-header"})])],1),t._v(" "),s("group",{staticClass:"numb-assets vux-1px-b"},[s("x-input",{attrs:{placeholder:"请输入转出数额",type:"number",required:!0},model:{value:t.amount,callback:function(a){t.amount=a},expression:"amount"}})],1),t._v(" "),s("div",{staticClass:"candy-basic-opera"},[s("group",{staticClass:"candy-numb",attrs:{title:"资产密码"}},[s("x-input",{attrs:{type:"password",placeholder:"请输入资产密码",required:!0},model:{value:t.security,callback:function(a){t.security=a},expression:"security"}})],1)],1)],1),t._v(" "),s("group",{staticClass:"grant-bottom"},[s("cell",[s("div",[s("span",{staticStyle:{color:"red"}},[t._v(t._s(t.gbl_price))])])]),t._v(" "),s("cell",[s("div",[s("span",{staticStyle:{color:"red"}},[t._v("可转"+t._s(t.vc_normal)+" "+t._s(t.$store.state.init.coin_uint))])])])],1),t._v(" "),s("div",{staticClass:"order_out"},[s("router-link",{attrs:{to:{path:"/transfer/order_out"}}},[s("div",{staticClass:"bottom-txt"},[t._v("转出记录")])])],1),t._v(" "),s("box",{staticClass:"grant-btn-box",attrs:{gap:"0 0"}},[s("x-button",{staticStyle:{"border-radius":"0",height:"2.875rem","font-size":"0.875rem"},attrs:{type:"primary"},nativeOn:{click:function(a){return t.send_to(a)}}},[t._v("确认转出")])],1)],1),t._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("loading",{attrs:{show:t.loading}})],1)])},staticRenderFns:[]};var h=e("C7Lr")(_,v,!1,function(t){e("acqD")},"data-v-2315da9c",null);a.default=h.exports},acqD:function(t,a){}});