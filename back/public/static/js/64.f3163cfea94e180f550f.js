webpackJsonp([64],{LNf9:function(t,a,e){t.exports=e.p+"img/block_chain.5decd38.jpg"},"q+7L":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("t8gK"),n=e("ky06"),s=e("Wf59"),o=e("ocpe"),c=e("jH8X"),l=e("8Dyd"),d=e("QOpP"),u=(c.a,i.a,n.a,s.a,d.default,o.a,l.a,{directives:{TransferDom:c.a},components:{XTextarea:i.a,Group:n.a,"vue-core-image-upload":s.a,Nodata:d.default,Loading:o.a,Scroller:l.a},data:function(){return{connect:this.$store.state.init.connect,title:"意见反馈",image:"",uploadUrl:"/api/app.util/upload",params:{type:"connect",_user_token:this.$store.state.token},content:"",connect_list:[],type:1,page:2,loadings:!0,loading:!1}},created:function(){var t=this;this.$http.post("/api/app.cms/connect/connect",{}).then(function(a){0==a.errcode&&(t.connect=a.data.connect)}),this.loadconnect()},mounted:function(){var t=this;window.CutCallBack=function(a){t.CutCallBack(a)}},methods:{imageuploaded:function(t){0==t.errcode&&(this.image=t.data.file_url)},AppUpload:function(){App.CutPhoto('{"w":"200","h":"200"}')},CutCallBack:function(t){var a=this,e=new FormData;e.append("type","connect"),e.append("file",convertBase64UrlToBlob(t));this.$http.post("/api/app.util/upload",e,{header:{"Content-Type":"multipart/form-data"}}).then(function(t){0==t.errcode&&(a.image=t.data.file_url)})},submit:function(){var t=this,a={content:this.content,image:this.image};this.$http.post("/api/app.cms/connect/store",a).then(function(a){0==a.errcode&&(t.$vux.toast.text("感谢您的积极反馈"),setTimeout(function(){t.$router.push({path:"/user/center"})},2e3))}).catch(function(a){t.$vux.toast.text(a.message)})},loadconnect:function(){var t=this;this.$http.post("/api/app.user/account/huifu",{type:this.type,page:1}).then(function(a){t.connect_list=a.data.huifus,t.loadings=!1,a.data.huifus.length<10&&(t.loading=!1,t.page=null)}).catch(function(a){t.$vux.toast.text(a.message)})},loadlist:function(){var t=this;this.loading||(null!=this.page?(this.loading=!0,this.$http.post("/api/app.user/account/huifu",{type:this.type,page:this.page}).then(function(a){a.data.huifus.length<1?(t.page=null,t.loading=!1,t.loadings=!1):(t.connect_list=t.connect_list.concat_unk(a.data.huifus,"id"),t.loadings=!1,t.page++,t.loading=!1)}).catch(function(a){a.errcode&&t.$vux.toast.text(a.message)})):this.loading=!1)}}}),r={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"page-about-connect"},[i("div",{staticClass:"upload_pic_title"},[t._v("请上传图片(选填)")]),t._v(" "),i("div",{staticClass:"setalipay-top"},[i("div",{staticClass:"update-box flex-box"},[""==t.image?i("div",{staticClass:"iconfont"},[t._v("")]):t._e(),t._v(" "),""==t.image?i("div",{staticClass:"setalipay-top-text"}):i("img",{staticClass:"qrcode-img",attrs:{src:t.image}})]),t._v(" "),t.$store.state.init.is_app?i("div",{staticClass:"upload-btn",on:{click:t.AppUpload}}):i("div",{staticClass:"upload-btn"},[i("vue-core-image-upload",{staticClass:"btn btn-primary",attrs:{crop:!1,data:t.params,"max-file-size":5242880,inputOfFile:"file",url:t.uploadUrl,text:""},on:{imageuploaded:t.imageuploaded}})],1)]),t._v(" "),i("div",{staticClass:"block"},[i("group",{attrs:{title:"请输入反馈内容"}},[i("x-textarea",{attrs:{max:500,name:"detail","show-counter":!0},model:{value:t.content,callback:function(a){t.content=a},expression:"content"}})],1)],1),t._v(" "),i("div",{staticClass:"reset-btn-box"},[i("box",{attrs:{gap:"30px 35px"}},[i("x-button",{staticClass:"found-btn",staticStyle:{"border-radius":"99px"},attrs:{type:"primary"},nativeOn:{click:function(a){t.submit()}}},[t._v("提交")])],1)],1),t._v(" "),t.loadings?t._e():i("div",[i("div",{staticClass:"connect-box"},[i("div",{staticClass:"connect-block"},t._l(t.connect_list,function(a,n){return i("div",{key:n,staticClass:"item-box"},[i("div",{staticClass:"item flex-box"},[i("div",{staticClass:"item-img"},[a.image?i("img",{attrs:{src:a.image,alt:"反馈图片"}}):i("img",{attrs:{src:e("LNf9"),alt:"默认图片"}})]),t._v(" "),i("div",{staticClass:"item-con flex-1"},[i("div",{staticClass:"item-decs"},[t._v("反馈时间:"+t._s(a.create_time))]),t._v(" "),i("div",{staticClass:"item-content"},[t._v("反馈内容："),i("em",[t._v(t._s(a.content)+" ")])]),t._v(" "),a.huifu?i("div",{staticClass:"item-decs"},[t._v("反馈回复："),i("em",[t._v(t._s(a.huifu)+" ")])]):i("div",{staticClass:"item-decs"},[t._v("反馈回复："),i("em",[t._v("请耐心等待回复")])])])])])})),t._v(" "),t.connect_list.length>0?i("Scroller",{attrs:{loading:t.loading,container:".connect-block"},on:{load:t.loadlist}}):i("nodata",{attrs:{datatip:"暂无数据"}})],1)]),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("loading",{attrs:{show:t.loadings}})],1)])},staticRenderFns:[]};var p=e("C7Lr")(u,r,!1,function(t){e("xRW3")},null,null);a.default=p.exports},xRW3:function(t,a){}});