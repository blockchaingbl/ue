webpackJsonp([38],{Wiya:function(e,t,s){var a={"./views/wallet_international/manage_item":"xLqa"};function o(e){return s(r(e))}function r(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id="Wiya"},fpIX:function(e,t){},xLqa:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("jH8X"),o=s("1a94"),r=s("ZXFd"),i=s("tXkb"),n=s("j996"),l=s("eT+W"),c=s("CltZ"),p=s("xmUH"),d=s("5zIW"),w=s("ULxt"),v=s("KDzu"),h=s("YaEn"),u=(s("5s1k"),s("sbZO")),_=s("sd/l"),m=(a.a,o.a,r.a,i.a,n.a,l.a,c.a,p.a,d.a,v.a,{directives:{TransferDom:a.a},components:{"x-header":o.a,actionsheet:r.a,cell:i.a,badge:n.a,"x-button":l.a,box:c.a,"popup-header":p.a,popup:d.a,qrcode:v.a},data:function(){var e=h.a.currentRoute.params.address,t=this.$store.state.wallets[e];return{page_title:h.a.currentRoute.meta.title,page_name:h.a.currentRoute.name,wallet:t,showChangeName:!1,inputWalletName:t.name,showChangePassword:!1,old_password:"",password:"",confirm_password:"",need_password:"",showNeedPassword:!1,needPasswordFor:"",export_private_key:"",export_keystore:"",showExportPrivate:!1,showExportKeystore:!1}},mounted:function(){},methods:{changeName:function(){this.showChangeName=!0},doChangeName:function(){var e=this;this.$refs.wallet_name.validate(),this.$refs.wallet_name.valid?(this.wallet.name=this.inputWalletName,this.$store.commit("updateWallet",this.wallet),this.$http.post("/api/app.wallet/wallets/setname",{address:this.wallet.address,name:this.inputWalletName}).then(function(t){t.error>0?e.$vux.toast.text(t.message):(e.cancelPop(),w.a.show({title:"提示",content:"钱包名称修改成功",onShow:function(){},onHide:function(){}}))}).catch(function(e){e.errcode&&$vue.$vux.toast.text(e.message)})):this.$refs.wallet_name.forceShowError=!0},changePassword:function(){this.showChangePassword=!0},doChangePassword:function(){var e=this,t=this.checkPassword(this.old_password);""!=t&&(this.$refs.password.validate(),this.$refs.confirm_password.validate(),this.$refs.password.valid&&this.$refs.confirm_password.valid?this.password==this.old_password?w.a.show({title:"错误",content:"新密码与旧密码相同",onShow:function(){},onHide:function(){}}):(this.wallet.enc_privateKey=_.a.encrypt(t,this.password),this.$store.commit("updateWallet",this.wallet),this.$http.post("/api/app.wallet/wallets/setpassword",{address:this.wallet.address,enc_privatekey:this.wallet.enc_privateKey}).then(function(t){t.error>0?e.$vux.toast.text(t.message):(e.cancelPop(),e.old_password="",e.password="",e.confirm_password="",w.a.show({title:"提示",content:"新密码设置成功",onShow:function(){},onHide:function(){}}))}).catch(function(t){t.errcode&&e.$vux.toast.text(t.message)})):(this.$refs.password.forceShowError=!0,this.$refs.confirm_password.forceShowError=!0,this.confirm_password||(this.$refs.confirm_password.errors.equal="输入不一致",this.$refs.confirm_password.getError())))},exportPrivate:function(){this.needPasswordFor="export_private",this.showNeedPassword=!0},exportKeystore:function(){this.needPasswordFor="export_keystore",this.showNeedPassword=!0},doNeedPassword:function(){var e=this.checkPassword(this.need_password);if(""!=e){var t=this;if("delete_wallet"!=t.needPasswordFor)var s=this.$loading({text:"导出中"});setTimeout(function(){if("export_private"==t.needPasswordFor)t.export_private_key=e,t.showExportPrivate=!0;else if("export_keystore"==t.needPasswordFor)t.export_keystore=u.a.wallet.privatekeyToKeystore(e,t.need_password),t.showExportKeystore=!0;else{for(var a in t.$store.commit("deleteWallet",t.wallet),t.$store.state.wallets);a&&t.$store.commit("changeWallet",a),t.$http.post("/api/app.wallet/wallets/delete",{address:t.wallet.address}).then(function(e){e.error>0?t.$vux.toast.text(e.message):h.a.replace({path:"/wallet_international"})}).catch(function(e){e.errcode&&t.$vux.toast.text(e.message)})}t.showNeedPassword=!1,t.need_password="","delete_wallet"!=t.needPasswordFor&&s.close()},500)}},deleteWallet:function(){this.needPasswordFor="delete_wallet",this.showNeedPassword=!0},cancelPop:function(){this.showChangeName=!1,this.showChangePassword=!1,this.showNeedPassword=!1,this.showExportPrivate=!1,this.showExportKeystore=!1},checkPassword:function(e){var t="",s="";try{t=_.a.decrypt(this.wallet.enc_privateKey,e);s=u.a.wallet.privatekeyToAddress(t)}catch(e){}return s.toLowerCase()!=this.wallet.address.toLowerCase()?(w.a.show({title:"错误",content:"钱包密码错误",onShow:function(){},onHide:function(){}}),""):t},onCopy:function(e){this.$vux.toast.text("复制成功")},onError:function(e){this.$vux.toast.text("复制失败，您可以尝试手动记录")}}}),f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:e.page_name}},[s("x-header",{staticClass:"inter_wallet_header",attrs:{"left-options":{showBack:!0,backText:""},"right-options":{showMore:!1}}},[e._v(e._s(e.page_title))]),e._v(" "),s("div",{staticClass:"wallet-card-box"},[s("div",{staticClass:"wallet-card"},[s("div",{staticClass:"wallet-info flex-box"},[e._m(0),e._v(" "),s("div",{staticClass:"wallet-info-text flex-1"},[s("div",{staticClass:"wall-name"},[e._v(e._s(e.wallet.name))]),e._v(" "),s("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.wallet.address,expression:"wallet.address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"wallet-address"},[e._v(e._s(e.shortStr(e.wallet.address,12,20,"..."))+" "),s("i",{staticClass:"iconfont"},[e._v("")])])])])])]),e._v(" "),s("group",[s("div",{staticClass:"op_row",on:{click:e.changeName}},[s("cell",{attrs:{"is-link":""}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("钱包名")]),e._v(" "),s("span",{attrs:{slot:""},slot:"default"},[e._v(e._s(e.wallet.name))])])],1),e._v(" "),s("div",{on:{click:e.changePassword}},[s("cell",{attrs:{"is-link":""}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改密码")])])],1)]),e._v(" "),s("group",[s("div",{staticClass:"op_row",on:{click:e.exportPrivate}},[s("cell",{attrs:{"is-link":""}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("导出私钥")])])],1),e._v(" "),s("div",{on:{click:e.exportKeystore}},[s("cell",{attrs:{"is-link":""}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("导出Keystore")])])],1)]),e._v(" "),s("box",{staticClass:"delete_box"},[s("x-button",{staticClass:"delete_wallet",nativeOn:{click:function(t){return e.deleteWallet(t)}}},[e._v("删除钱包")])],1),e._v(" "),s("popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],model:{value:e.showChangeName,callback:function(t){e.showChangeName=t},expression:"showChangeName"}},[s("popup-header",{attrs:{"left-text":"","right-text":"",title:"请输入钱包名称","show-bottom-border":!1},on:{"on-click-left":function(t){e.show1=!1},"on-click-right":function(t){e.show1=!1}}}),e._v(" "),s("box",{attrs:{gap:"0 10px 20px 10px"}},[s("group",[s("x-input",{ref:"wallet_name",attrs:{max:16,min:4,required:!0,placeholder:"请输入钱包的新名称"},model:{value:e.inputWalletName,callback:function(t){e.inputWalletName=t},expression:"inputWalletName"}})],1),e._v(" "),s("group",{staticClass:"nobg"},[s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.doChangeName(t)}}},[e._v("确认")]),e._v(" "),s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.cancelPop(t)}}},[e._v("取消")])],1)],1)],1),e._v(" "),s("popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],model:{value:e.showChangePassword,callback:function(t){e.showChangePassword=t},expression:"showChangePassword"}},[s("popup-header",{attrs:{"left-text":"","right-text":"",title:"修改钱包密码","show-bottom-border":!1},on:{"on-click-left":function(t){e.show1=!1},"on-click-right":function(t){e.show1=!1}}}),e._v(" "),s("box",{attrs:{gap:"0 10px 20px 10px"}},[s("group",[s("x-input",{ref:"wallet_password",attrs:{max:16,min:4,required:!0,type:"password",placeholder:"请输入钱包的原密码"},model:{value:e.old_password,callback:function(t){e.old_password=t},expression:"old_password"}}),e._v(" "),s("x-input",{ref:"password",attrs:{placeholder:"钱包新密码",type:"password",min:4,max:16,required:!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("x-input",{ref:"confirm_password",attrs:{placeholder:"再次输入钱包新密码",type:"password",min:4,max:16,"equal-with":e.password,required:!0},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1),e._v(" "),s("group",{staticClass:"nobg"},[s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.doChangePassword(t)}}},[e._v("确认")]),e._v(" "),s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.cancelPop(t)}}},[e._v("取消")])],1)],1)],1),e._v(" "),s("popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],model:{value:e.showNeedPassword,callback:function(t){e.showNeedPassword=t},expression:"showNeedPassword"}},[s("popup-header",{attrs:{"left-text":"","right-text":"",title:"请确认钱包密码","show-bottom-border":!1},on:{"on-click-left":function(t){e.show1=!1},"on-click-right":function(t){e.show1=!1}}}),e._v(" "),s("box",{attrs:{gap:"0 10px 20px 10px"}},[s("group",{staticClass:"password_input"},[s("x-input",{ref:"need_password",attrs:{max:16,min:4,required:!0,type:"password",placeholder:"请输入钱包的密码"},model:{value:e.need_password,callback:function(t){e.need_password=t},expression:"need_password"}})],1),e._v(" "),s("group",{staticClass:"nobg"},[s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.doNeedPassword(t)}}},[e._v("确认")]),e._v(" "),s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.cancelPop(t)}}},[e._v("取消")])],1)],1)],1),e._v(" "),s("popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],attrs:{height:"100%"},model:{value:e.showExportPrivate,callback:function(t){e.showExportPrivate=t},expression:"showExportPrivate"}},[s("x-header",{staticClass:"tip_title",attrs:{"left-options":{showBack:!1}}},[e._v("私钥导出成功 ")]),e._v(" "),s("div",{staticClass:"tip"},[s("div",{staticClass:"export_title"},[e._v("私钥不可更改，请妥善保存你的私钥")])]),e._v(" "),s("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.export_private_key,expression:"export_private_key",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"export_show"},[e._v("\n            "+e._s(e.export_private_key)+"\n            "),s("span",{staticClass:"copyd"},[e._v("点击复制")])]),e._v(" "),s("qrcode",{staticClass:"qrcode",attrs:{value:e.export_private_key}}),e._v(" "),s("box",{staticClass:"export_save"},[s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.cancelPop(t)}}},[e._v("已保存好")])],1)],1),e._v(" "),s("popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],attrs:{height:"100%"},model:{value:e.showExportKeystore,callback:function(t){e.showExportKeystore=t},expression:"showExportKeystore"}},[s("x-header",{staticClass:"tip_title",attrs:{"left-options":{showBack:!1}}},[e._v("Keystore导出成功 ")]),e._v(" "),s("div",{staticClass:"tip"},[s("div",{staticClass:"export_title"},[e._v("请妥善保存你的Keystore")])]),e._v(" "),s("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.export_keystore,expression:"export_keystore",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"export_show_keystore"},[e._v("\n            "+e._s(e.export_keystore)+"\n            "),s("span",{staticClass:"copyd"},[e._v("点击复制")])]),e._v(" "),s("qrcode",{staticClass:"qrcode",attrs:{value:e.export_keystore}}),e._v(" "),s("box",{staticClass:"export_save"},[s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.cancelPop(t)}}},[e._v("已保存好")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wallet-img"},[t("img",{attrs:{src:s("SA/o"),alt:""}})])}]};var x=s("C7Lr")(m,f,!1,function(e){s("fpIX")},"data-v-d9d27e8e",null);t.default=x.exports}});