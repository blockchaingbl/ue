webpackJsonp([62],{"43ie":function(e,t){},"9Ds6":function(e,t,s){var a={"./views/wallet/create":"vjwE"};function r(e){return s(o(e))}function o(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="9Ds6"},vjwE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("jH8X"),r=s("1a94"),o=s("CHv/"),i=s("eT+W"),n=s("CltZ"),p=(s("ULxt"),s("5zIW")),l=s("t8gK"),c=s("YaEn"),d=(s("5s1k"),s("sbZO")),u=s("sd/l"),v=(a.a,r.a,o.a,i.a,n.a,p.a,l.a,{directives:{TransferDom:a.a},components:{"x-header":r.a,"x-input":o.a,"x-button":i.a,box:n.a,popup:p.a,"x-textarea":l.a},data:function(){return{page_title:c.a.currentRoute.meta.title,page_name:c.a.currentRoute.name,name:"",password:"",confirm_password:"",seedShow:!1,seed:"",ifsuccess:!1}},mounted:function(){},beforeRouteLeave:function(e,t,s){"wallet"==e.name&&1==this.ifsuccess&&this.refresh(),s()},methods:{refresh:function(e,t){var s=this;this.$store.state.balance_loading=!0,this.$http.post("/api/app.wallet/propertydb/sum",{address:this.$store.state.wallet.address}).then(function(e){for(var a in s.$store.state.properties=e.data.properties,s.$store.state.balance_loading=!1,s.$store.state.properties_amount=0,s.$store.state.properties)s.$store.state.properties_set[s.$store.state.properties[a].type]=s.$store.state.properties[a],s.$store.state.properties[a].amount>0&&(s.$store.state.properties_amount+=s.$store.state.properties[a].amount*s.$store.state.properties[a].price);t&&t.call(null)}).catch(function(e){s.$store.state.balance_loading=!1,t&&t.call(null)})},seedSave:function(){c.a.replace({path:"/wallet"})},createWallet:function(){if(this.ifsuccess=!0,this.$refs.name.validate(),this.$refs.password.validate(),this.$refs.confirm_password.validate(),this.$refs.name.valid&&this.$refs.password.valid&&this.$refs.confirm_password.valid){var e=this.$loading({text:"创建中"}),t=this;setTimeout(function(){var s=this;t.seed=d.a.wallet.createSeed();var a=d.a.wallet.createBySeed(t.seed,"",0),r={};r.name=t.name,r.address=a.address,r.enc_privateKey=u.a.encrypt(a.privatekey,t.password),r.wallet_pwd=u.a.md5(t.password),t.$store.commit("addWallet",r),t.$store.commit("loadProperties"),t.$http.post("/api/app.wallet/wallets/bind",{name:r.name,address:r.address,enc_privatekey:r.enc_privateKey,wallet_pwd:r.wallet_pwd}).then(function(e){e.error>0?t.$vux.toast.text(e.message):(t.seedShow=!0,s.ifsuccess=!0)}).catch(function(e){e.errcode&&t.$vux.toast.text(e.message)}),e.close()},500)}else this.$refs.name.forceShowError=!0,this.$refs.password.forceShowError=!0,this.$refs.confirm_password.forceShowError=!0,this.confirm_password||(this.$refs.confirm_password.errors.equal="输入不一致",this.$refs.confirm_password.getError())},onCopy:function(e){this.$vux.toast.text("复制成功")},onError:function(e){this.$vux.toast.text("复制失败，您可以尝试手动记录")}}}),m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:e.page_name}},[s("x-header",{attrs:{"left-options":{showBack:!0,backText:""}}},[e._v(e._s(e.page_title))]),e._v(" "),e._m(0),e._v(" "),s("group",[s("x-input",{ref:"name",attrs:{placeholder:"请输入钱包名称",min:4,max:16,required:!0},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),s("x-input",{ref:"password",attrs:{placeholder:"请输入钱包密码",type:"password",min:4,max:16,required:!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("x-input",{ref:"confirm_password",attrs:{placeholder:"再次输入钱包密码",type:"password",min:4,max:16,"equal-with":e.password,required:!0},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1),e._v(" "),s("box",{attrs:{gap:"20px 10px"}},[s("x-button",{staticStyle:{"border-radius":"99px",height:"2.375rem","font-size":"0.875rem"},attrs:{type:"primary"},nativeOn:{click:function(t){return e.createWallet(t)}}},[e._v("立即创建")])],1),e._v(" "),s("box",{staticStyle:{"text-align":"center"},attrs:{gap:"20px 10px"}},[s("router-link",{attrs:{to:"/wallet/import"}},[e._v("导入钱包")])],1),e._v(" "),s("popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],staticClass:"create-pop",attrs:{height:"100%"},model:{value:e.seedShow,callback:function(t){e.seedShow=t},expression:"seedShow"}},[s("x-header",{staticClass:"tip_title",attrs:{"left-options":{showBack:!1}}},[e._v("钱包创建成功 ")]),e._v(" "),s("div",{staticClass:"tip"},[s("div",{staticClass:"save_seed_title"},[e._v("请备份助记词")]),e._v(" "),s("ul",[s("li",[e._v("请抄写下您的钱包助记词")]),e._v(" "),s("li",[e._v("助记词用于恢复钱包或者重置密码")]),e._v(" "),s("li",[e._v("钱包不保存助记词信息，一旦丢失，您将无法再找回")])])]),e._v(" "),s("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.seed,expression:"seed",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"seed-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.seed,expression:"seed"}],attrs:{type:"hidden"},domProps:{value:e.seed},on:{input:function(t){t.target.composing||(e.seed=t.target.value)}}}),e._v(" "),s("div",{staticClass:"seedShow"},[e._v("\n                "+e._s(e.seed)+"\n            ")]),e._v(" "),s("p",[e._v("点击复制助记词")])]),e._v(" "),s("box",{staticClass:"seedSave"},[s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.seedSave(t)}}},[e._v("已保存好")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip"},[t("ul",{staticClass:"tip_ul"},[t("li",[this._v("密码用于保护私钥和流通授权，强度非常重要")]),this._v(" "),t("li",[this._v("钱包不存储密码，也无法帮您找回，请务必牢记")])])])}]};var f=s("C7Lr")(v,m,!1,function(e){s("43ie")},"data-v-18d6857a",null);t.default=f.exports}});