webpackJsonp([37],{"/Adv":function(t,a){},"602X":function(t,a,e){var i={"./views/user/setalipay":"LTpb"};function n(t){return e(s(t))}function s(t){var a=i[t];if(!(a+1))throw new Error("Cannot find module '"+t+"'.");return a}n.keys=function(){return Object.keys(i)},n.resolve=s,t.exports=n,n.id="602X"},LTpb:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("dZLx"),n=e("Wf59"),s=(n.a,{components:{"vue-core-image-upload":n.a},data:function(){return{hasWallet:0,payment_receipt:"",payment_account:"",security:"",qrcode:"",uploadUrl:"/api/app.util/upload",params:{type:"weixin",_user_token:this.$store.state.token},h5flag:!0}},mounted:function(){this.getPaymentInfo();var t=this;window.CutCallBack=function(a){t.CutCallBack(a)}},methods:{getPaymentInfo:function(){var t=this;this.$http.post("/api/app.payment/payment/bindinfo",{payment_key:"alipay"}).then(function(a){a.data.bind_info.alipay&&(t.payment_receipt=a.data.bind_info.alipay.payment_receipt,t.payment_account=a.data.bind_info.alipay.payment_account,t.qrcode=a.data.bind_info.alipay.qrcode)}).catch(function(a){a.errcode&&t.$vux.toast.text(a.message)})},bindPayment:function(){var t=this;""!=this.qrcode?""!=this.payment_receipt?""!=this.payment_account?""!=this.security?this.$http.post("/api/app.payment/payment/bind",{payment_key:"alipay",qrcode:this.qrcode,payment_receipt:this.payment_receipt,payment_account:this.payment_account,security:Object(i.a)(this.security)}).then(function(a){"0"==a.errcode&&(t.$vux.toast.show({text:"绑定成功"}),t.$router.push({path:"/user/setpay"}))}).catch(function(a){a.errcode&&t.$vux.toast.text(a.message)}):this.$vux.toast.text("请输入资产密码"):this.$vux.toast.text("请填写账号"):this.$vux.toast.text("请填写姓名"):this.$vux.toast.text("请上传二维码图片")},imageuploaded:function(t){0==t.errcode&&(this.qrcode=t.data.file_url)},AppUpload:function(){App.CutPhoto('{"w":"200","h":"200"}')},CutCallBack:function(t){var a=this,e=new FormData;e.append("type","alipay"),e.append("file",convertBase64UrlToBlob(t));this.$http.post("/api/app.util/upload",e,{header:{"Content-Type":"multipart/form-data"}}).then(function(t){0==t.errcode&&(a.qrcode=t.data.file_url)})}}}),o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"setalipay"},[e("div",{staticClass:"setalipay-box"},[e("div",{staticClass:"setalipay-top"},[e("div",{staticClass:"update-box flex-box"},[""==t.qrcode?e("div",{staticClass:"iconfont"},[t._v("")]):t._e(),t._v(" "),""==t.qrcode?e("div",{staticClass:"setalipay-top-text"},[t._v("\r\n                    上传您的支付宝二维码\r\n                ")]):e("img",{staticClass:"qrcode-img",attrs:{src:t.qrcode}})]),t._v(" "),t.$store.state.init.is_app?e("div",{staticClass:"upload-btn",on:{click:t.AppUpload}}):e("div",{staticClass:"upload-btn"},[e("vue-core-image-upload",{staticClass:"btn btn-primary",attrs:{crop:!1,data:t.params,"max-file-size":5242880,inputOfFile:"file",url:t.uploadUrl,text:""},on:{imageuploaded:t.imageuploaded}})],1)]),t._v(" "),e("div",{staticClass:"block"},[e("group",{staticClass:"alipay-item no-line"},[e("x-input",{attrs:{title:"姓名","text-align":"right",max:10},model:{value:t.payment_receipt,callback:function(a){t.payment_receipt=a},expression:"payment_receipt"}})],1)],1),t._v(" "),e("div",{staticClass:"block"},[e("group",{staticClass:"alipay-item"},[e("x-input",{attrs:{title:"支付宝账户","text-align":"right",placeholder:"请输入您的支付宝账户",max:20},model:{value:t.payment_account,callback:function(a){t.payment_account=a},expression:"payment_account"}})],1)],1),t._v(" "),e("div",{staticClass:"block"},[e("group",{staticClass:"alipay-item no-line"},[e("x-input",{attrs:{type:"password",title:"资产密码","text-align":"right",placeholder:"请输入您的资产密码"},model:{value:t.security,callback:function(a){t.security=a},expression:"security"}})],1)],1),t._v(" "),e("div",{staticClass:"reset-btn-box"},[e("box",{attrs:{gap:"30px 35px"}},[e("x-button",{staticClass:"found-btn",staticStyle:{"border-radius":"99px"},attrs:{type:"primary"},nativeOn:{click:function(a){t.bindPayment()}}},[t._v("保存")])],1)],1)])])},staticRenderFns:[]};var p=e("C7Lr")(s,o,!1,function(t){e("/Adv")},null,null);a.default=p.exports}});