webpackJsonp([2],{AnSB:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("3z1N"),i=e("jH8X"),o=e("1a94"),r=e("ZXFd"),n=e("tXkb"),l=e("j996"),c=e("CltZ"),_=e("crx6"),u=e("5zIW"),p=e("oa6C"),d=e("HR9D"),m=e("mlvW"),v=e("YaEn"),x=(i.a,a.a,o.a,r.a,n.a,l.a,c.a,_.a,u.a,p.a,d.a,m.a,{directives:{TransferDom:i.a},components:{walletbar:a.a,"x-header":o.a,actionsheet:r.a,cell:n.a,badge:l.a,box:c.a,"load-more":_.a,popup:u.a,divider:p.a,msg:d.a,"x-progress":m.a,nodata:function(){return e.e(94).then(e.bind(null,"QOpP"))}},data:function(){var t=0,s="ethereum";return v.a.currentRoute.params.coin&&(s=v.a.currentRoute.params.coin),this.$store.state.properties.length>0&&(t=this.$store.state.properties_set[s].amount+" "+this.$store.state.properties_set[s].name),{page_title:v.a.currentRoute.meta.title,page_name:v.a.currentRoute.name,coin_amount:t,tx_list:{},tx_listlenght:1,load_more_tip:"点击加载更多",page:0,list_end:!1,tx_detail:!1,tx_item:{},icon:"success",unconfirm_tx_list:[],unconfirm_tx_items:[],ethereum_confirm_count:12,base_coin:""}},mounted:function(){var t=this;this.$store.state.wallet.address?this.loadMore():this.$store.commit("loadWallets",function(){t.loadMore(),t.$store.commit("loadProperties",function(){var s="ethereum";v.a.currentRoute.params.coin&&(s=v.a.currentRoute.params.coin),t.coin_amount=t.$store.state.properties_set[s].amount+" "+t.$store.state.properties_set[s].name})}),window.js_qr_code_scan=function(s){t.js_qr_code_scan(s)}},methods:{goback:function(){this.$router.push("/wallet")},confirmTx:function(){var t=this;this.unconfirm_tx_list.length>0&&setTimeout(function(){t.$http.post("/api/app.wallet/transaction/confirm",{tx_hashes:t.unconfirm_tx_list}).then(function(s){for(var e=0;e<s.data.tx_list.length;e++)for(var a=s.data.tx_list[e].hash,i=0;i<t.unconfirm_tx_items.length;i++)t.unconfirm_tx_items[i].hash==a&&(t.unconfirm_tx_items[i].confirmations=s.data.tx_list[e].confirmations,t.unconfirm_tx_items[i].pending=s.data.tx_list[e].pending,t.unconfirm_tx_items[i].is_error=s.data.tx_list[e].is_error);s.data.confirmed_list.length==t.unconfirm_tx_list.length&&(t.unconfirm_tx_list=[],t.unconfirm_tx_items=[]),t.confirmTx()}).catch(function(s){t.$store.state.page_loading=!1})},5e3)},showTx:function(t){this.tx_detail=!0,this.tx_item=this.tx_list[t]},closeTxDetail:function(){this.tx_detail=!1},loadMore:function(){var t=this;if(!this.list_end){this.page++;var s="ethereum";v.a.currentRoute.params.coin&&(s=v.a.currentRoute.params.coin),this.$store.state.page_loading||(this.$store.state.page_loading=!0,this.$http.post("/api/app.wallet/transaction/txlistdb",{address:this.$store.state.wallet.address,page:this.page,coin:s}).then(function(s){if(t.$store.state.page_loading=!1,t.base_coin=s.data.base_coin,t.ethereum_confirm_count=s.data.ethereum_confirm_count,0==s.data.tx_list.length)t.list_end=!0,t.load_more_tip="到底了";else{s.data.tx_list.length<30&&(t.list_end=!0,t.load_more_tip="到底了");for(var e=0;e<s.data.tx_list.length;e++)t.tx_list[s.data.tx_list[e].hash]=s.data.tx_list[e],s.data.tx_list[e].confirmations<t.ethereum_confirm_count&&0==s.data.tx_list[e].is_error&&(t.unconfirm_tx_list.push(s.data.tx_list[e].hash),t.unconfirm_tx_items.push(s.data.tx_list[e]))}if(isNaN(t.tx_list)){var a=0;for(var i in t.tx_list)a++;t.tx_listlenght=a}else t.tx_listlenght=0;t.confirmTx()}).catch(function(s){t.$store.state.page_loading=!1}))}},open_scan:function(){App.qr_code_scan();var t=this;window.js_qr_code_scan=function(s){if("0x"==s.substr(0,2)){var e="ethereum";v.a.currentRoute.params.coin&&(e=v.a.currentRoute.params.coin);var a="/wallet/send/"+e+"?address="+s;t.$router.push({path:a})}else s=s.replace(t.$store.state.init.route_domain+"/#",""),t.$router.push({path:s})}},onCopy:function(t){this.$vux.toast.text("复制成功")},onError:function(t){this.$vux.toast.text("复制失败，您可以尝试手动记录")}}}),h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:t.page_name}},[e("x-header",{attrs:{"left-options":{showBack:!0,backText:"",preventGoBack:!0},"right-options":{showMore:!1}},on:{"on-click-back":t.goback}},[t._v(t._s(t.page_title)+"\n        "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.init.is_app,expression:"$store.state.init.is_app"}],staticClass:"iconfont",staticStyle:{fill:"#fff",position:"relative",top:"-2px","font-size":"1.4rem"},attrs:{slot:"right"},on:{click:function(s){t.open_scan()}},slot:"right"},[t._v("")])]),t._v(" "),e("div",{staticClass:"main_card"},[e("div",{staticClass:"wallet_amount"},[t._v(t._s(t.coin_amount))]),t._v(" "),e("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:this.$store.state.wallet.address,expression:"this.$store.state.wallet.address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"wallet_address"},[t._v(t._s(t.shortStr(this.$store.state.wallet.address,12,20,"..."))+" "),e("i",{staticClass:"iconfont"},[t._v("")])])]),t._v(" "),e("group",{staticClass:"tx_list_block"},t._l(this.tx_list,function(s,a){return e("div",{staticClass:"tx_list",on:{click:function(e){t.showTx(s.hash)}}},[s.confirmations>=t.ethereum_confirm_count?e("div",{staticClass:"tx_list-con flex-box"},["shouru"==s.txType?e("div",{staticClass:"formatValue_add iconfont"},[t._v("")]):t._e(),t._v(" "),"zhichu"==s.txType?e("div",{staticClass:"iconfont formatValue_reduce"},[t._v("")]):t._e(),t._v(" "),e("cell",{staticClass:"tx_list-txt flex-1",attrs:{"is-link":""}},[e("span",{attrs:{slot:"title"},slot:"title"},[e("i",{class:["iconfont","icon-"+s.txType,"tx_icon"]}),t._v(" "),e("span",{staticClass:"address_hash"},[e("span",{staticClass:"tx_list_key"},[t._v(t._s(t.shortStr(s.hashShow,12,20,"...")))]),t._v(" "),e("span",{staticClass:"tx_list_time"},[t._v(t._s(s.datetime))])])]),t._v(" "),e("span",{staticClass:"tx_amount",attrs:{slot:"value"},slot:"value"},[t._v(t._s(s.formatValue))])])],1):e("div",{staticClass:"tx_list-con flex-box"},["shouru"==s.txType?e("div",{staticClass:"formatValue_add iconfont"},[t._v("")]):t._e(),t._v(" "),"zhichu"==s.txType?e("div",{staticClass:"iconfont formatValue_reduce"},[t._v("")]):t._e(),t._v(" "),e("cell",{staticClass:"tx_list-txt flex-1",attrs:{"is-link":""}},[e("span",{attrs:{slot:"title"},slot:"title"},[e("i",{class:["iconfont","icon-"+s.txType,"tx_icon"]}),t._v(" "),e("span",{staticClass:"address_hash"},[e("span",{staticClass:"tx_list_key"},[t._v(t._s(t.shortStr(s.hashShow,12,20,"...")))]),t._v(" "),s.confirmations>0?e("span",{staticClass:"tx_list_time"},[e("x-progress",{attrs:{percent:s.confirmations/t.ethereum_confirm_count*100,"show-cancel":!1}}),t._v("\n                                确认中："+t._s(s.confirmations)+"/"+t._s(t.ethereum_confirm_count)+"\n                            ")],1):e("span",{staticClass:"tx_list_time"},[e("x-progress",{attrs:{percent:s.confirmations/t.ethereum_confirm_count*100,"show-cancel":!1}}),t._v(" "),0==s.is_error?e("span",[t._v("等待打包")]):e("span",[t._v("流通失败")])],1)])]),t._v(" "),e("span",{staticClass:"tx_amount",attrs:{slot:"value"},slot:"value"},[t._v(t._s(s.formatValue))])])],1)])})),t._v(" "),t.tx_listlenght<1?e("nodata",{attrs:{datatip:"暂无数据"}}):t._e(),t._v(" "),t.tx_listlenght>0?e("box",{staticClass:"page"},[e("load-more",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.page_loading,expression:"this.$store.state.page_loading"}],attrs:{tip:"正在加载"}}),t._v(" "),e("div",{on:{click:t.loadMore}},[e("load-more",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.page_loading,expression:"!this.$store.state.page_loading"}],attrs:{"show-loading":!1,tip:t.load_more_tip,"background-color":"#fbf9fe"}})],1)],1):t._e(),t._v(" "),e("popup",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],attrs:{height:"100%"},model:{value:t.tx_detail,callback:function(s){t.tx_detail=s},expression:"tx_detail"}},[e("div",{staticClass:"tx_detail"},[e("x-header",{attrs:{"left-options":{showBack:!1,backText:"",preventGoBack:!0},"right-options":{showMore:!1}},on:{"on-click-back":t.closeTxDetail}},[t._v("流通记录 "),e("i",{staticClass:"iconfont",staticStyle:{fill:"#fff",position:"relative",top:"-2px","font-size":"1.4rem"},attrs:{slot:"right"},on:{click:function(s){t.closeTxDetail()}},slot:"right"},[t._v("")])]),t._v(" "),e("div",{staticClass:"tx_detail-top"},[0==t.tx_item.is_error?e("div",{staticClass:"detail-top-icon iconfont"},[t._v("")]):e("div",{staticClass:"detail-top-icon iconfont",staticStyle:{"font-size":"3rem","text-align":"center","line-height":"3.65625rem",background:"#ff3300"}},[t._v("")]),t._v(" "),e("div",{staticClass:"detail_value"},[t._v(t._s(t.tx_item.value)+" "+t._s(t.tx_item.unit))]),t._v(" "),e("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tx_item.hash,expression:"tx_item.hash",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"detail_txhash"},[t._v(t._s(t.shortStr(t.tx_item.hash,12,40,"..."))+"  "),e("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),e("divider")],1),t._v(" "),e("div",{staticClass:"tx_detail-people"},[e("group",{staticClass:"party vux-1px-b",attrs:{title:"发款方"}},[e("cell",[e("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tx_item.from,expression:"tx_item.from",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"wallet_address",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.shortStr(t.tx_item.from,12,20,"..."))+" "),e("i",{staticClass:"iconfont"},[t._v("")])])])],1),t._v(" "),t.tx_item.to?e("group",{staticClass:"party vux-1px-b",attrs:{title:"转入方"}},[e("cell",[e("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tx_item.to,expression:"tx_item.to",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"wallet_address",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.shortStr(t.tx_item.to,12,20,"..."))+" "),e("i",{staticClass:"iconfont"},[t._v("")])])])],1):t._e(),t._v(" "),t.tx_item.contractAddress&&!t.tx_item.to?e("group",{staticClass:"party",attrs:{title:"合约发布"}},[e("cell",[e("span",{staticClass:"wallet_address",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.tx_item.contractAddress))])])],1):t._e()],1),t._v(" "),e("group",{staticClass:"tx_detail_block"},[e("cell",[e("span",{staticClass:"tx_detail_title",attrs:{slot:"title"},slot:"title"},[t._v("矿工费用")]),t._v(" "),e("span",{staticClass:"tx_detail_value"},[t._v(t._s(t.tx_item.gasFee)+" "+t._s(t.base_coin))])]),t._v(" "),e("cell",[e("span",{staticClass:"tx_detail_title",attrs:{slot:"title"},slot:"title"},[t._v("区块编号")]),t._v(" "),e("span",{staticClass:"tx_detail_value"},[t._v(t._s(t.tx_item.blockNumber)+" ")])]),t._v(" "),e("cell",[e("span",{staticClass:"tx_detail_title",attrs:{slot:"title"},slot:"title"},[t._v("流通时间")]),t._v(" "),e("span",{staticClass:"tx_detail_value"},[t._v(t._s(t.tx_item.datetime)+" ")])]),t._v(" "),t.tx_item.confirmations>0?e("cell",[e("span",{staticClass:"tx_detail_title",attrs:{slot:"title"},slot:"title"},[t._v("流通确认")]),t._v(" "),e("span",{staticClass:"tx_detail_value"},[t._v(t._s(t.tx_item.confirmations>=t.ethereum_confirm_count?"已确认":t.tx_item.confirmations+"/"+t.ethereum_confirm_count)+" ")])]):e("cell",[e("span",{staticClass:"tx_detail_title",attrs:{slot:"title"},slot:"title"},[t._v("流通确认")]),t._v(" "),0==t.tx_item.is_error?e("span",{staticClass:"tx_detail_value"},[t._v("等待打包")]):e("span",{staticClass:"tx_detail_value"},[t._v("流通失败")])])],1)],1)])],1)},staticRenderFns:[]};var f=e("C7Lr")(x,h,!1,function(t){e("Bc3g")},"data-v-71004720",null);s.default=f.exports},Bc3g:function(t,s){},HR9D:function(t,s,e){"use strict";var a=e("+Ln8"),i={name:"msg",props:["icon","title","description","buttons"],methods:{onClick:function(t,s){"function"==typeof t&&t(),s&&Object(a.a)(s,this.$router)}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"weui-msg"},[e("div",{staticClass:"weui-msg__icon-area"},[e("i",{staticClass:"weui-icon_msg",class:"weui-icon-"+(t.icon||"success")})]),t._v(" "),e("div",{staticClass:"weui-msg__text-area"},[e("h2",{staticClass:"weui-msg__title",domProps:{innerHTML:t._s(t.title)}}),t._v(" "),e("p",{staticClass:"weui-msg__desc"},[t._t("description")],2),t._v(" "),t.description?e("p",{staticClass:"weui-msg__desc",domProps:{innerHTML:t._s(t.description)}}):t._e()]),t._v(" "),e("div",{staticClass:"weui-msg__opr-area"},[e("p",{staticClass:"weui-btn-area"},[t._t("buttons",t._l(t.buttons,function(s){return e("a",{staticClass:"weui-btn",class:"weui-btn_"+s.type,attrs:{href:"javascript:;"},on:{click:function(e){t.onClick(s.onClick,s.link)}}},[t._v(t._s(s.text))])}))],2)])])},staticRenderFns:[]};var r=e("C7Lr")(i,o,!1,function(t){e("dwiu")},null,null);s.a=r.exports},QLfY:function(t,s){},dwiu:function(t,s){},eiWJ:function(t,s,e){var a={"./views/wallet/detail":"AnSB"};function i(t){return e(o(t))}function o(t){var s=a[t];if(!(s+1))throw new Error("Cannot find module '"+t+"'.");return s}i.keys=function(){return Object.keys(a)},i.resolve=o,t.exports=i,i.id="eiWJ"},mlvW:function(t,s,e){"use strict";var a=e("IfgW"),i=(a.a,Number,Boolean,{name:"x-progress",mixins:[a.a],props:{percent:{type:Number,default:0},showCancel:{type:Boolean,default:!0}},methods:{cancel:function(){this.$emit("on-cancel")}}}),o={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"weui-progress"},[s("div",{staticClass:"weui-progress__bar"},[s("div",{staticClass:"weui-progress__inner-bar",style:{width:this.percent+"%"}})]),this._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:this.showCancel,expression:"showCancel"}],staticClass:"weui-progress_opr",attrs:{href:"javascript:;"}},[s("i",{staticClass:"weui-icon-cancel",on:{click:this.cancel}})])])},staticRenderFns:[]};var r=e("C7Lr")(i,o,!1,function(t){e("QLfY")},null,null);s.a=r.exports}});