webpackJsonp([70],{Y4OW:function(t,s){},bccC:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("CHv/"),a=i("eT+W"),o=i("CltZ"),n=i("hpCS"),c=i("DEX7"),r=i("ocpe"),l=i("jH8X"),u=i("EOtl"),h=(l.a,e.a,a.a,o.a,n.a,c.a,r.a,u.a,{directives:{TransferDom:l.a},components:{XInput:e.a,XButton:a.a,Box:o.a,PopupRadio:n.a,XSwitch:c.a,Loading:r.a,Radio:u.a},data:function(){return{coin_info:[],lock:!0,chose_coin:"",coin_info_detail:{},vc_total:{},show_coin:{},asset:0,copys:"",lock_day:"",disable:!1,amount:"",disable_desc:"",coin_unit:this.$store.state.init.coin_uint,copys_amount:0,receive_limit:"",loading:!0,mobile:"",security:""}},mounted:function(){this.get_auth_info()},methods:{get_auth_info:function(){var t=this;this.$http.post("/api/app.user/sugar/sugar_auth",{}).then(function(s){var i=s.data.auth_info;for(var e in i)t.coin_info.push({key:e,value:i[e].coin_unit});t.chose_coin="0",t.coin_info_detail=i,t.vc_total=parseFloat(i[0].assets.amount),t.hide_change(),t.loading=!1}).catch(function(s){s.errcode&&t.$vux.toast.text(s.message)})},hide_change:function(){var t=this.chose_coin;if(this.show_coin=this.coin_info_detail[t],this.asset="剩余资产："+this.show_coin.assets.amount,1==this.show_coin.auth_info.status){if(this.disable=!1,parseFloat(this.vc_total)<parseFloat(this.show_coin.auth_info.min_limit)){this.disable=!0;var s=parseFloat(this.show_coin.auth_info.min_limit).toFixed(5);this.disable_desc="您的"+this.coin_unit+"实时资产低于"+s+",已被限制"}}else this.disable=!0,this.disable_desc="您没有权限"},grant:function(){var t=this,s=this.lock_day,i=this;this.lock||(s=0);var e={coin_type:this.chose_coin,amount:this.amount,copys:this.copys,copys_amount:this.copys_amount,lock_day:s,receive_limit:this.receive_limit,mobile:this.mobile,security:i.security};return 0==this.copys||""==this.copys?(this.$vux.toast.text("输入份数不能小于1"),!1):this.copys!=Math.round(this.copys)?(this.$vux.toast.text("请输入整的份数"),!1):this.lock_day!=Math.round(this.lock_day)?(this.$vux.toast.text("请输入整的锁仓天数"),!1):this.copys.length>5?(this.$vux.toast.text("您输入的份数太多，请重新输入"),!1):this.lock_day.length>5?(this.$vux.toast.text("您输入的锁仓天数太久，请重新输入"),!1):this.lock&&!this.lock_day?(this.$vux.toast.text("请输入锁仓天数"),!1):this.security?(this.loading=!0,void this.$http.post("/api/app.user/sugar/grant",e).then(function(s){if(t.loading=!1,0==s.errcode){var e={coin_unit:i.show_coin.coin_unit,sugar_info:s.data.sugar};i.$router.push({name:"candy_success",params:e})}else t.$vux.toast.text(s.message)}).catch(function(s){t.loading=!1,s.errcode&&t.$vux.toast.text(s.message)})):(this.$vux.toast.text("请输入密码"),!1)}},computed:{per_sugar:function(){var t=0;return this.copys>0&&(t=(this.amount/this.copys).toFixed(5)),this.copys_amount=t,"每人领多少: "+t+" "+this.show_coin.coin_unit},sugar_fee_one:function(){if(!this.disable&&this.copys>0&&this.show_coin.hasOwnProperty("auth_info")){var t=this.show_coin.price/parseFloat(this.coin_info_detail[0].price);return"一份糖果所需手续费"+(this.amount*this.show_coin.auth_info.receive_fee/this.copys*t).toFixed(5)+" "+this.coin_unit}return""},sugar_fee:function(){if(!this.disable&&this.show_coin.hasOwnProperty("auth_info")){var t=this.show_coin.price/parseFloat(this.coin_info_detail[0].price);return"共需手续费"+(this.amount*this.show_coin.auth_info.receive_fee*t).toFixed(5)+" "+this.coin_unit}return""}}}),d={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"page-grant"},[t.loading?t._e():i("div",[i("div",{staticClass:"candy-basic-opera"},[i("group",{staticClass:"assets-type vux-1px-b"},[i("popup-radio",{attrs:{title:"资产类型",options:t.coin_info},on:{"on-hide":t.hide_change},model:{value:t.chose_coin,callback:function(s){t.chose_coin=s},expression:"chose_coin"}},[i("p",{staticClass:"vux-1px-b grant-coin-slot",attrs:{slot:"popup-header"},slot:"popup-header"},[t._v("资产类型")])])],1),t._v(" "),i("group",{staticClass:"numb-assets vux-1px-b"},[i("cell",{staticClass:"cell-assets",attrs:{title:"发糖总数额",value:t.asset}}),t._v(" "),i("x-input",{attrs:{placeholder:"请输入发糖总数额",type:"number",required:!0},model:{value:t.amount,callback:function(s){t.amount=s},expression:"amount"}})],1),t._v(" "),i("group",{staticClass:"candy-numb vux-1px-b",attrs:{title:"糖果份数"}},[i("x-input",{attrs:{placeholder:"请输入糖果份数",keyboard:"number",type:"number",required:!0,max:5},model:{value:t.copys,callback:function(s){t.copys=s},expression:"copys"}})],1),t._v(" "),i("group",{staticClass:"candy-numb vux-1px-b",attrs:{title:"资产密码"}},[i("x-input",{attrs:{type:"password",placeholder:"请输入资产密码",required:!0},model:{value:t.security,callback:function(s){t.security=s},expression:"security"}})],1),t._v(" "),i("group",{attrs:{title:t.per_sugar}})],1),t._v(" "),i("div",{staticClass:"candy-senior-opera"},[i("group",{staticClass:"lock-time vux-1px-b"},[i("div",{staticClass:"lock-select flex-box"},[i("div",{staticClass:"lock-se-title flex-1"},[t._v("是否锁仓")]),t._v(" "),i("x-switch",{attrs:{title:"锁仓"},model:{value:t.lock,callback:function(s){t.lock=s},expression:"lock"}})],1),t._v(" "),i("x-input",{directives:[{name:"show",rawName:"v-show",value:t.lock,expression:"lock"}],staticClass:"candy-numb",attrs:{placeholder:"请输入锁仓天数(天)",keyboard:"number",type:"number",max:5},model:{value:t.lock_day,callback:function(s){t.lock_day=s},expression:"lock_day"}})],1),t._v(" "),i("group",{staticClass:"limit-time",attrs:{title:"领取有效期(天)"}},[i("x-input",{attrs:{placeholder:"输入发糖后可领取时间",type:"number",keyboard:"number",required:!0},model:{value:t.receive_limit,callback:function(s){t.receive_limit=s},expression:"receive_limit"}})],1)],1),t._v(" "),i("group",{staticClass:"grant-bottom"},[i("cell",[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.disable,expression:"!disable"}]},[i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.sugar_fee_one))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.disable,expression:"!disable"}]},[i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.sugar_fee))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.disable,expression:"disable"}]},[i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.disable_desc))])])])],1),t._v(" "),i("box",{staticClass:"grant-btn-box",attrs:{gap:"0 0"}},[t.disable?i("x-button",{staticStyle:{"background-color":"#6f7180","border-radius":"0",height:"2.875rem","font-size":"0.875rem"},attrs:{type:"primary",disabled:""}},[t._v("发糖果")]):i("x-button",{staticStyle:{"border-radius":"0",height:"2.875rem","font-size":"0.875rem"},attrs:{type:"primary"},nativeOn:{click:function(s){return t.grant(s)}}},[t._v("发糖果")])],1)],1),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("loading",{attrs:{show:t.loading}})],1)])},staticRenderFns:[]};var _=i("C7Lr")(h,d,!1,function(t){i("Y4OW")},"data-v-dca02b5c",null);s.default=_.exports}});