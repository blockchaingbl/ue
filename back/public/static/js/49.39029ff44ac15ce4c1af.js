webpackJsonp([49],{WNlY:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s("1a94"),e=s("CHv/"),n=s("eT+W"),l=s("CltZ"),o=(s("ULxt"),s("SPhl")),r=s("sNOJ"),_=s("t8gK"),u=s("ocpe"),f=s("jpEr"),c=s("s5gs"),d=s("8Dyd"),v=(s("VduZ"),s("YaEn")),m=s("eOoE"),p=s("QOpP"),x=(i.a,e.a,n.a,l.a,o.a,r.a,_.a,u.a,f.a,d.a,n.a,c.a,p.default,{components:{"x-header":i.a,"x-input":e.a,"x-button":n.a,box:l.a,tab:o.a,"tab-item":r.a,"x-textarea":_.a,loading:u.a,"x-table":f.a,Scroller:d.a,XButton:n.a,Search:c.a,Nodata:p.default},data:function(){return{page_title:v.a.currentRoute.meta.title,page_name:v.a.currentRoute.name,tab_index:0,formData:{page:1},lock:!1,user_list:[],loading:!1,keyword:""}},mounted:function(){this.loadLists()},methods:{cancel:function(){this.$refs.search.setBlur(),this.loading=!1,this.user_list=[],this.formData.page=1,this.loadLists()},search:function(){this.$refs.search.setBlur(),this.loading=!1,this.user_list=[],this.formData.page=1,this.loadLists(!0)},follow:function(t){var a=this,s={follow_user_id:t.id},i=t.user_follow_id?"/api/app.user/relations/unfollow":"/api/app.user/relations/follow";this.$http.post(i,s).then(function(s){t.user_follow_id=s.data.user_follow_id,a.$vux.toast.text(s.message)}).catch(function(t){a.$vux.toast.text(t.message)})},loadLists:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.loading);else if(null!=this.formData.page){this.loading=!0;var s="",i=this.formData;switch(this.tab_index){case 0:s="/api/app.user/relations/myfollow";break;case 1:s="/api/app.user/relations/myfans";break;case 2:s="/api/app.user/relations/recommend"}a&&(i={search_key:this.keyword,page:this.formData.page},s="/api/app.user/relations/find"),this.$http.post(s,i).then(function(a){null==a.data?(t.formData.page=null,t.loading=!1):a.data.user_list.length<1?(t.formData.page=null,t.loading=!1):(t.formData.page++,t.user_list=t.user_list.concat_unk(a.data.user_list,"id"),t.loading=!1)}).catch(function(a){t.formData.page=null,t.loading=!1})}else this.loading=!1},onScrollBottom:function(){this.formData.page++,this.loadLists()}},watch:{tab_index:{handler:function(t,a){for(;m.a.cancelTokens.length>0;){m.a.cancelTokens.pop()()}this.loading=!1,this.user_list=[],this.formData.page=1,this.keyword="",this.$refs.search.setBlur(),this.loadLists()}}}}),h={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"page-friends",attrs:{id:t.page_name}},[i("tab",{model:{value:t.tab_index,callback:function(a){t.tab_index=a},expression:"tab_index"}},[i("tab-item",[t._v("关注")]),t._v(" "),i("tab-item",[t._v("粉丝")]),t._v(" "),i("tab-item",[t._v("推荐")])],1),t._v(" "),i("box",{directives:[{name:"show",rawName:"v-show",value:0==t.tab_index,expression:"tab_index==0"}]},[i("div",{staticClass:"friend-block"},t._l(t.user_list,function(a){return i("div",{staticClass:"friend-item flex-box"},[i("div",{staticClass:"user-row"},[""==a.avatar?i("img",{attrs:{src:s("0gU3"),alt:""}}):i("img",{attrs:{src:a.avatar}})]),t._v(" "),i("div",{staticClass:"friend-text flex-1 flex-box vux-1px-b"},[i("div",{staticClass:"fitem-name flex-1"},[t._v(t._s(a.username)+"\n                        "),a.user_follow_id>0&&null!=a.user_follow_id&&a.user_fans_id>0&&null!=a.user_fans_id?i("span",{staticClass:"iconfont friend_ico"},[t._v("")]):a.user_fans_id>0&&null!=a.user_fans_id?i("span",{staticClass:"iconfont friend_ico"},[t._v("")]):t._e()]),t._v(" "),i("router-link",{staticClass:"fitem-link",attrs:{to:"/mine/steal/"+a.id}},[a.user_follow_id>0&&null!=a.user_follow_id&&a.user_fans_id>0&&null!=a.user_fans_id?i("XButton",{attrs:{mini:!0,type:"primary"}},[t._v("去偷币")]):t._e()],1),t._v(" "),a.user_follow_id>0&&null!=a.user_follow_id?i("XButton",{staticClass:"followed flex-box",attrs:{mini:!0},nativeOn:{click:function(s){t.follow(a)}}},[t._v("已关注")]):i("XButton",{staticClass:"follow-btn flex-box",attrs:{mini:!0},nativeOn:{click:function(s){t.follow(a)}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),i("span",[t._v("关注")])])],1)])}))]),t._v(" "),i("box",{directives:[{name:"show",rawName:"v-show",value:1==t.tab_index,expression:"tab_index==1"}]},[i("div",{staticClass:"friend-block"},t._l(t.user_list,function(a){return i("div",{staticClass:"friend-item flex-box"},[i("div",{staticClass:"user-row"},[""==a.avatar?i("img",{attrs:{src:s("0gU3"),alt:""}}):i("img",{attrs:{src:a.avatar}})]),t._v(" "),i("div",{staticClass:"friend-text flex-1 flex-box vux-1px-b"},[i("div",{staticClass:"fitem-name flex-1"},[t._v(t._s(a.username)+"\n                        "),a.user_follow_id>0&&null!=a.user_follow_id&&a.user_fans_id>0&&null!=a.user_fans_id?i("span",{staticClass:"iconfont friend_ico"},[t._v("")]):a.user_fans_id>0&&null!=a.user_fans_id?i("span",{staticClass:"iconfont friend_ico"},[t._v("")]):t._e()]),t._v(" "),i("router-link",{staticClass:"fitem-link",attrs:{to:"/mine/steal/"+a.id}},[a.user_follow_id>0&&null!=a.user_follow_id&&a.user_fans_id>0&&null!=a.user_fans_id?i("XButton",{attrs:{mini:!0,type:"primary"}},[t._v("去偷币")]):t._e()],1),t._v(" "),a.user_follow_id>0&&null!=a.user_follow_id?i("XButton",{staticClass:"followed flex-box",attrs:{mini:!0},nativeOn:{click:function(s){t.follow(a)}}},[t._v("已关注")]):i("XButton",{staticClass:"follow-btn flex-box",attrs:{mini:!0},nativeOn:{click:function(s){t.follow(a)}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),i("span",[t._v("关注")])])],1)])}))]),t._v(" "),i("box",{directives:[{name:"show",rawName:"v-show",value:2==t.tab_index,expression:"tab_index==2"}]},[i("search",{ref:"search",staticClass:"friends-search",attrs:{placeholder:"请输入对方手机号码",position:"static"},on:{"on-submit":t.search,"on-cancel":t.cancel},model:{value:t.keyword,callback:function(a){t.keyword=a},expression:"keyword"}}),t._v(" "),i("div",{staticClass:"friend-block"},t._l(t.user_list,function(a){return i("div",{staticClass:"friend-item flex-box"},[i("div",{staticClass:"user-row"},[""==a.avatar?i("img",{attrs:{src:s("0gU3"),alt:""}}):i("img",{attrs:{src:a.avatar}})]),t._v(" "),i("div",{staticClass:"friend-text flex-1 flex-box vux-1px-b"},[i("div",{staticClass:"fitem-name flex-1"},[t._v(t._s(a.username)+"\n                        "),a.user_follow_id>0&&null!=a.user_follow_id&&a.user_fans_id>0&&null!=a.user_fans_id?i("span",{staticClass:"iconfont friend_ico"},[t._v("")]):a.user_fans_id>0&&null!=a.user_fans_id?i("span",{staticClass:"iconfont friend_ico"},[t._v("")]):t._e()]),t._v(" "),i("router-link",{staticClass:"fitem-link",attrs:{to:"/mine/steal/"+a.id}},[a.user_follow_id>0&&null!=a.user_follow_id&&a.user_fans_id>0&&null!=a.user_fans_id?i("XButton",{attrs:{mini:!0,type:"primary"}},[t._v("去偷币")]):t._e()],1),t._v(" "),a.user_follow_id>0&&null!=a.user_follow_id?i("XButton",{staticClass:"followed flex-box",attrs:{mini:!0},nativeOn:{click:function(s){t.follow(a)}}},[t._v("已关注")]):i("XButton",{staticClass:"follow-btn flex-box",attrs:{mini:!0},nativeOn:{click:function(s){t.follow(a)}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),i("span",[t._v("关注")])])],1)])}))],1),t._v(" "),t.user_list.length>0?i("Scroller",{attrs:{loading:t.loading,container:".block-box"},on:{load:t.loadLists}}):i("nodata",{attrs:{datatip:"暂无数据"}})],1)},staticRenderFns:[]};var w=s("C7Lr")(x,h,!1,function(t){s("cRDy")},"data-v-5767d880",null);a.default=w.exports},bcJj:function(t,a,s){var i={"./views/relations/friends":"WNlY"};function e(t){return s(n(t))}function n(t){var a=i[t];if(!(a+1))throw new Error("Cannot find module '"+t+"'.");return a}e.keys=function(){return Object.keys(i)},e.resolve=n,t.exports=e,e.id="bcJj"},cRDy:function(t,a){}});